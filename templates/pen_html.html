<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 商品圖設計室</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/design_tool.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="logo">AI 商品圖設計室</div>
        <div class="nav-buttons">
            <button class="nav-button">檔案</button>
            <button class="nav-button">↩</button>
            <button class="nav-button">↪</button>
        </div>
        <div class="points-container">
            <div class="points">可用 Point 數：2.50</div>
            <button class="add-points">+ 前往儲值</button>
            <button class="check-points">查看 Point 紀錄</button>
        </div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-item active">
                <div>🖼️</div>
                <div class="sidebar-item-text">商品圖</div>
            </div>
            <div class="sidebar-item">
                <div>👤</div>
                <div class="sidebar-item-text">我的</div>
            </div>
            <div class="sidebar-item">
                <div>📝</div>
                <div class="sidebar-item-text">生成紀錄</div>
            </div>
            <div class="sidebar-item" onclick="location.href='/knowledge_base'">
                <div>🤖</div>
                <div class="sidebar-item-text">機器人</div>
            </div>
            <div class="sidebar-item" style="margin-top: auto;">
                <div>ℹ️</div>
                <div class="sidebar-item-text">免責聲明</div>
            </div>
        </div>
        
        <div class="tools-panel">
            <div class="tools-header">
                <span>🔧</span>
                <span class="tools-title">樣式</span>
            </div>
            
            <div class="dimension-options">
                <div class="dimension-grid">
                    <div class="dimension-item">|— 50 cm —|</div>
                    <div class="dimension-item">|← 50 cm →|</div>
                    <div class="dimension-item">|-- 50 cm --|</div>
                    <div class="dimension-item">|----- 50 cm -----|</div>
                    <div class="dimension-item">□— 50 cm —□</div>
                    <div class="dimension-item">←— 50 cm —→</div>
                    <div class="dimension-item">
                        <div style="display: flex; align-items: center;">
                            <div style="border-bottom: 1px dotted #000; width: 60px;"></div>
                            <div style="background: #333; color: #fff; padding: 2px 5px; font-size: 12px; margin: 0 3px;">meitu</div>
                        </div>
                    </div>
                    <div class="dimension-item">
                        <div style="display: flex; align-items: center;">
                            <div style="border-bottom: 1px solid #f00; width: 30px;"></div>
                            <div style="color: #f00; padding: 2px 5px; font-size: 12px;">meitu</div>
                        </div>
                    </div>
                    <div class="dimension-item">
                        <div style="display: flex; align-items: center;">
                            <div style="border-bottom: 1px solid #00f; width: 30px;"></div>
                            <div style="color: #00f; padding: 2px 5px; font-size: 12px;">meitu</div>
                        </div>
                    </div>
                    <div class="dimension-item">
                        <div style="display: flex; align-items: center;">
                            <div style="border-bottom: 1px dashed #ccc; width: 60px;"></div>
                            <div style="color: #ccc; padding: 2px 5px; font-size: 12px;">meitu</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="settings-section">
                <div class="settings-title">⚙️ 設定</div>
                
                <div class="settings-tabs">
                    <div class="settings-tab active">類型</div>
                    <div class="settings-tab">數值</div>
                    <div class="settings-tab">自定義</div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">數值</label>
                    <input type="text" class="setting-input" value="50">
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">單位</label>
                    <select class="setting-select">
                        <option>cm</option>
                        <option>mm</option>
                        <option>inch</option>
                    </select>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">位置</label>
                    <select class="setting-select">
                        <option>線條中間</option>
                        <option>線條上方</option>
                        <option>線條下方</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="canvas-container">
            <!-- 工具欄 -->
            <div class="toolbar">
                <div class="tool-group">
                    <button class="tool-btn pen-btn active" data-tool="pen"><i class="fas fa-pen"></i> 筆</button>
                    <button class="tool-btn line-btn" data-tool="line"><i class="fas fa-slash"></i> 線條</button>
                    <button class="tool-btn arrow-btn" data-tool="arrow"><i class="fas fa-long-arrow-alt-right"></i> 箭頭</button>
                    <button class="tool-btn ruler-btn" data-tool="ruler"><i class="fas fa-ruler"></i> 尺規</button>
                    <button class="tool-btn text-btn" data-tool="text"><i class="fas fa-font"></i> 文字</button>
                </div>
                
                <div class="tool-group">
                    <button class="tool-btn flip-h-btn" id="flip-horizontal"><i class="fas fa-arrows-alt-h"></i> 水平翻轉</button>
                    <button class="tool-btn flip-v-btn" id="flip-vertical"><i class="fas fa-arrows-alt-v"></i> 垂直翻轉</button>
                    <button class="tool-btn reset-btn" id="reset-image"><i class="fas fa-undo"></i> 重置</button>
                </div>
                
                <div class="tool-group">
                    <input type="color" class="color-picker" value="#FF0000">
                    <button class="tool-btn upload-btn" id="upload-button"><i class="fas fa-upload"></i> 上傳</button>
                    <button class="tool-btn save-btn"><i class="fas fa-save"></i> 保存</button>
                    <button class="tool-btn clear-btn"><i class="fas fa-trash"></i> 清除</button>
                </div>
            </div>
            
            <!-- 圖像調整面板 -->
            <div class="image-adjustments-panel">
                <div class="adjustment-item">
                    <label for="brightness-slider">亮度</label>
                    <input type="range" id="brightness-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
                <div class="adjustment-item">
                    <label for="contrast-slider">對比度</label>
                    <input type="range" id="contrast-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
                <div class="adjustment-item">
                    <label for="shadow-slider">陰影</label>
                    <input type="range" id="shadow-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
                <div class="adjustment-item">
                    <label for="saturation-slider">飽和度</label>
                    <input type="range" id="saturation-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
                <div class="adjustment-item">
                    <label for="clarity-slider">清晰度</label>
                    <input type="range" id="clarity-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
                <div class="adjustment-item">
                    <label for="whitebalance-slider">白平衡</label>
                    <input type="range" id="whitebalance-slider" class="adjustment-slider" min="-100" max="100" value="0">
                    <span class="slider-value">0</span>
                </div>
            </div>

            <!-- 濾鏡效果選擇區 -->
            <div class="filter-selection">
                <h3>濾鏡效果</h3>
                <div class="filter-grid">
                    <div class="filter-item" data-filter="none">
                        <img src="" alt="無濾鏡" id="filter-none">
                        <span>無</span>
                    </div>
                    <div class="filter-item" data-filter="grayscale">
                        <img src="" alt="黑白" id="filter-grayscale">
                        <span>黑白</span>
                    </div>
                    <div class="filter-item" data-filter="sepia">
                        <img src="" alt="褐色" id="filter-sepia">
                        <span>褐色</span>
                    </div>
                    <div class="filter-item" data-filter="vintage">
                        <img src="" alt="復古" id="filter-vintage">
                        <span>復古</span>
                    </div>
                    <div class="filter-item" data-filter="cold">
                        <img src="" alt="冷色調" id="filter-cold">
                        <span>冷色調</span>
                    </div>
                    <div class="filter-item" data-filter="warm">
                        <img src="" alt="暖色調" id="filter-warm">
                        <span>暖色調</span>
                    </div>
                </div>
            </div>
            
            <div class="canvas">
                <div id="upload-placeholder" class="upload-placeholder">
                    <div class="upload-icon">📁</div>
                    <div class="upload-text">點擊上傳按鈕添加圖像</div>
                    <input type="file" id="direct-file-input" accept="image/*" style="display:none;">
                    <button id="upload-button-large" class="btn upload-btn">選擇圖片</button>
                </div>
                <div id="message-container" class="message-container"></div>
                <!-- Canvas will be inserted here by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- 文字編輯對話框 - 放在主容器外 -->
    <div id="text-edit-dialog" class="dialog-overlay">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3>添加文字</h3>
                <button class="close-dialog"><i class="fas fa-times"></i></button>
            </div>
            <div class="dialog-body">
                <div class="text-edit-container">
                    <textarea id="text-input" placeholder="請輸入文字內容..."></textarea>
                    <div class="text-style-options">
                        <div class="style-option">
                            <label>字體</label>
                            <select id="font-family">
                                <option value="Arial">Arial</option>
                                <option value="Microsoft JhengHei">微軟正黑體</option>
                                <option value="SimSun">宋體</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Courier New">Courier New</option>
                            </select>
                        </div>
                        <div class="style-option">
                            <label>大小</label>
                            <input type="number" id="font-size" min="8" max="72" value="24">
                        </div>
                        <div class="style-option">
                            <label>顏色</label>
                            <input type="color" id="text-color" value="#000000">
                        </div>
                        <div class="style-option">
                            <label>粗體</label>
                            <input type="checkbox" id="bold-text">
                        </div>
                        <div class="style-option">
                            <label>斜體</label>
                            <input type="checkbox" id="italic-text">
                        </div>
                        <div class="style-option">
                            <label>底線</label>
                            <input type="checkbox" id="underline-text">
                        </div>
                    </div>
                </div>
            </div>
            <div class="dialog-footer">
                <button class="cancel-btn">取消</button>
                <button class="add-text-btn">添加文字</button>
            </div>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/design_tool.js"></script>
</body>
</html>